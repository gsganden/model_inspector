---

title: inspect


keywords: fastai
sidebar: home_sidebar

summary: "Inspect models."
description: "Inspect models."
nb_path: "00_inspect.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_inspect.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_inspector" class="doc_header"><code>get_inspector</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L31" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_inspector</code>(<strong><code>model</code></strong>, <strong><code>X</code></strong>, <strong><code>y</code></strong>)</p>
</blockquote>
<p>Get an appropriate inspector for your model and data</p>
<p>Parameters:</p>
<ul>
<li><code>model</code>: Fitted sklearn model</li>
<li><code>X</code>: Feature matrix with same shape and column meanings as
features <code>model</code> was trained on</li>
<li><code>y</code>: Target series with same length as <code>X</code> and same meaning as
target <code>model</code> was trained on</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ModelType" class="doc_header"><code>ModelType</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L57" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Enum</code> = [REGRESSION, BINARY, MULTICLASS]</p>
</blockquote>
<p>An enumeration.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="identify_type" class="doc_header"><code>identify_type</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L63" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>identify_type</code>(<strong><code>model</code></strong>, <strong><code>y</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_model_html" class="doc_header"><code>generate_model_html</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L154" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_model_html</code>(<strong><code>intercept</code></strong>:<code>float</code>, <strong><code>coefs</code></strong>:<code>Sequence</code>[<code>float</code>], <strong><code>feature_names</code></strong>:<code>Iterable</code>[<code>str</code>], <strong><code>target_name</code></strong>:<code>str</code>, <strong><code>intercept_formatter</code></strong>:<code>str</code>=<em><code>'.2f'</code></em>, <strong><code>coef_formatter</code></strong>:<code>str</code>=<em><code>'.2f'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Methods">Methods<a class="anchor-link" href="#Methods"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="kn">import</span> <span class="nn">sklearn.datasets</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span><span class="p">,</span> <span class="n">RandomForestRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">Lasso</span><span class="p">,</span> <span class="n">LinearRegression</span><span class="p">,</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">metrics</span>

<span class="kn">from</span> <span class="nn">model_inspector.tune</span> <span class="kn">import</span> <span class="n">coverage</span><span class="p">,</span> <span class="n">calculate_metric_ignoring_nan</span><span class="p">,</span> <span class="n">fbeta</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="All-Models">All Models<a class="anchor-link" href="#All-Models"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Every <code>Inspector</code> object has these methods.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_Plotter.plot_correlation" class="doc_header"><code>_Plotter.plot_correlation</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L459" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_Plotter.plot_correlation</code>(<strong><code>heatmap_kwargs</code></strong>=<em><code>None</code></em>, <strong><code>ax</code></strong>:<code>Optional</code>[<code>Axes</code>]=<em><code>None</code></em>)</p>
</blockquote>
<p>Plot a correlation matrix for <code>self.X</code> and <code>self.y</code></p>
<p>Parameters:</p>
<ul>
<li><code>heatmap_kwargs</code>: kwargs to pass to <code>sns.heatmap</code></li>
<li><code>ax</code>: Matplotlib <code>Axes</code> object. Plot will be added to this object
if provided; otherwise a new <code>Axes</code> object will be generated.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X_diabetes</span><span class="p">,</span> <span class="n">y_diabetes</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">load_diabetes</span><span class="p">(</span><span class="n">return_X_y</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">as_frame</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">RandomForestRegressor</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_diabetes</span><span class="p">,</span> <span class="n">y_diabetes</span><span class="p">),</span> <span class="n">X_diabetes</span><span class="p">,</span> <span class="n">y_diabetes</span>
<span class="p">)</span>

<span class="n">_</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot_correlation</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Classifiers">Classifiers<a class="anchor-link" href="#Classifiers"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Every <code>Inspector</code> object for a classification model has these methods.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_ClasInspector.calculate_metrics_by_thresh" class="doc_header"><code>_ClasInspector.calculate_metrics_by_thresh</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L126" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_ClasInspector.calculate_metrics_by_thresh</code>(<strong><code>prob_to_pred</code></strong>:<code>Union</code>[<code>str</code>, <code>Callable</code>], <strong><code>metrics</code></strong>:<code>Union</code>[<code>Callable</code>, <code>Sequence</code>[<code>Callable</code>]])</p>
</blockquote>
<p>Calculate classification metrics as a function of threshold</p>
<p>Parameters:</p>
<ul>
<li><code>prob_to_pred</code>: Callable that takes
<code>self.model.predict_proba(self.X)</code> and <code>thresh</code> as positional
arguments and returns <code>y_pred</code></li>
<li><code>metrics</code>: Callables that take <code>self.y</code>, <code>y_pred</code> as
positional arguments and return a number. Must have a <code>__name__</code>
attribute.</li>
</ul>
<p>Returns: DataFrame with one column "thresh" indicating the
thresholds used, which is 0 and the sorted set of values that
occur in <code>y_prob</code>, and an additional column for each input
metric giving the value of that metric at that threshold.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X_cancer</span><span class="p">,</span> <span class="n">y_cancer</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">load_breast_cancer</span><span class="p">(</span><span class="n">return_X_y</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">as_frame</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">RandomForestClassifier</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_cancer</span><span class="p">,</span> <span class="n">y_cancer</span><span class="p">),</span> <span class="n">X_cancer</span><span class="p">,</span> <span class="n">y_cancer</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">predict_true_if_prob_above_thresh</span><span class="p">(</span><span class="n">y_prob</span><span class="p">,</span> <span class="n">thresh</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">y_prob</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">thresh</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>


<span class="n">ax</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">inspector</span><span class="o">.</span><span class="n">calculate_metrics_by_thresh</span><span class="p">(</span>
        <span class="n">prob_to_pred</span><span class="o">=</span><span class="n">predict_true_if_prob_above_thresh</span><span class="p">,</span>
        <span class="n">metrics</span><span class="o">=</span><span class="p">[</span><span class="n">metrics</span><span class="o">.</span><span class="n">precision_score</span><span class="p">,</span> <span class="n">metrics</span><span class="o">.</span><span class="n">recall_score</span><span class="p">,</span> <span class="n">metrics</span><span class="o">.</span><span class="n">f1_score</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;thresh&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">precision_ignoring_nan</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
    <span class="n">calculate_metric_ignoring_nan</span><span class="p">,</span>
    <span class="n">metric</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">metrics</span><span class="o">.</span><span class="n">precision_score</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s2">&quot;micro&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">precision_ignoring_nan</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="s2">&quot;precision_ignoring_nan&quot;</span>

<span class="n">X_iris</span><span class="p">,</span> <span class="n">y_iris</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">load_iris</span><span class="p">(</span><span class="n">return_X_y</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">as_frame</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">RandomForestClassifier</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_iris</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="n">y_iris</span><span class="p">),</span>
    <span class="n">X_iris</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">3</span><span class="p">]],</span>
    <span class="n">y_iris</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">inspector</span><span class="o">.</span><span class="n">calculate_metrics_by_thresh</span><span class="p">(</span>
        <span class="n">prob_to_pred</span><span class="o">=</span><span class="k">lambda</span> <span class="n">y_prob</span><span class="p">,</span> <span class="n">thresh</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
            <span class="n">y_prob</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">thresh</span><span class="p">,</span> <span class="n">y_prob</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="p">),</span>
        <span class="n">metrics</span><span class="o">=</span><span class="p">[</span><span class="n">coverage</span><span class="p">,</span> <span class="n">precision_ignoring_nan</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;thresh&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Linear-Models">Linear Models<a class="anchor-link" href="#Linear-Models"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Every <code>Inspector</code> object for a linear model has these methods.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_LinRegInspector.show_equation" class="doc_header"><code>_LinRegInspector.show_equation</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L247" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_LinRegInspector.show_equation</code>(<strong><code>intercept_formatter</code></strong>:<code>str</code>=<em><code>'.2f'</code></em>, <strong><code>coef_formatter</code></strong>:<code>str</code>=<em><code>'.2f'</code></em>)</p>
</blockquote>
<p>Show model equation</p>
<p>Parameters:</p>
<ul>
<li><code>intercept_formatter</code>: Intercept format specifier</li>
<li><code>coef_formatter</code>: Intercept format specifier</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LinearRegression</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_diabetes</span><span class="p">,</span> <span class="n">y_diabetes</span><span class="p">),</span> <span class="n">X_diabetes</span><span class="p">,</span> <span class="n">y_diabetes</span>
<span class="p">)</span>

<span class="n">inspector</span><span class="o">.</span><span class="n">show_equation</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_cancer</span><span class="p">,</span> <span class="n">y_cancer</span><span class="p">),</span> <span class="n">X_cancer</span><span class="p">,</span> <span class="n">y_cancer</span>
<span class="p">)</span>

<span class="n">inspector</span><span class="o">.</span><span class="n">show_equation</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_iris</span><span class="p">,</span> <span class="n">y_iris</span><span class="p">),</span> <span class="n">X_iris</span><span class="p">,</span> <span class="n">y_iris</span>
<span class="p">)</span>

<span class="n">inspector</span><span class="o">.</span><span class="n">show_equation</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_LinRegInspector.plot_coefs_vs_hparam" class="doc_header"><code>_LinRegInspector.plot_coefs_vs_hparam</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L179" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_LinRegInspector.plot_coefs_vs_hparam</code>(<strong><code>hparam</code></strong>:<code>str</code>, <strong><code>vals</code></strong>:<code>Sequence</code>[<code>float</code>])</p>
</blockquote>
<p>Plot coefficient values against a hyperparameter</p>
<p>Parameters:</p>
<ul>
<li><code>hparam</code>: Name of hyperparameter; must be an attribute of
<code>self.model</code></li>
<li><code>vals</code>: Values of that hyperparameter to use</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span><span class="n">Lasso</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_diabetes</span><span class="p">,</span> <span class="n">y_diabetes</span><span class="p">),</span> <span class="n">X_diabetes</span><span class="p">,</span> <span class="n">y_diabetes</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot_coefs_vs_hparam</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This method is defined for linear regression and binary logistic regression models but not for multiclass logistic regression models.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_LinRegInspector.plot_waterfall" class="doc_header"><code>_LinRegInspector.plot_waterfall</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L206" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_LinRegInspector.plot_waterfall</code>(<strong><code>item</code></strong>:<code>Union</code>[<code>Series</code>, <code>array</code>], <strong><code>bar_num_formatter</code></strong>:<code>str</code>=<em><code>'.1f'</code></em>, <strong><code>tick_num_formatter</code></strong>:<code>str</code>=<em><code>'.2f'</code></em>, <strong><code>waterfall_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>)</p>
</blockquote>
<p>Make a waterfall chart showing how each feature contributes
to the prediction for the input item.</p>
<p>Parameters:</p>
<ul>
<li><code>item</code>: Input item, with the same shape and value meanings as
a single row from <code>self.X</code></li>
<li><code>bar_num_formatter</code>: Bar label format specifier</li>
<li><code>tick_num_formatter</code>: Tick label format specifier</li>
<li><code>waterfall_kwargs</code>: kwargs to pass to <code>waterfall_chart.plot</code></li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LinearRegression</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_diabetes</span><span class="p">,</span> <span class="n">y_diabetes</span><span class="p">),</span> <span class="n">X_diabetes</span><span class="p">,</span> <span class="n">y_diabetes</span>
<span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot_waterfall</span><span class="p">(</span><span class="n">X_diabetes</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_cancer</span><span class="p">,</span> <span class="n">y_cancer</span><span class="p">),</span> <span class="n">X_cancer</span><span class="p">,</span> <span class="n">y_cancer</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot_waterfall</span><span class="p">(</span><span class="n">X_cancer</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Models-with-One-Feature">Models with One Feature<a class="anchor-link" href="#Models-with-One-Feature"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>An <code>Inspector</code> for any model with one feature has a <code>plot</code> method. The interface is slightly different for binary models than for multiclass or regression models.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_Bin1dPlotter.plot" class="doc_header"><code>_Bin1dPlotter.plot</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L519" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_Bin1dPlotter.plot</code>(<strong><code>thresh</code></strong>:<code>Optional</code>[<code>float</code>]=<em><code>0.5</code></em>, <strong><code>plot_data</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>prob_line_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>thresh_line_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>scatter_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>ax</code></strong>:<code>Optional</code>[<code>Axes</code>]=<em><code>None</code></em>)</p>
</blockquote>
<p>Plot predictions from a binary classification model that provides
probabilities and has a single input</p>
<p>Parameters:</p>
<ul>
<li><code>thresh</code>: Threshold probability</li>
<li><code>plot_data</code>: Make a scatter plot of the data</li>
<li><code>prob_line_kwargs</code>: kwargs to pass to <code>ax.plot</code> for plotting
model probabilities</li>
<li><code>thresh_line_kwargs</code>: kwargs to pass to <code>ax.plot</code> for plotting
threshold</li>
<li><code>scatter_kwargs</code>: kwargs to pass to <code>ax.scatter</code> for plotting data</li>
<li><code>ax</code>: Matplotlib <code>Axes</code> object. Plot will be added to this object
if provided; otherwise a new <code>Axes</code> object will be generated.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_cancer</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">y_cancer</span><span class="p">),</span>
    <span class="n">X_cancer</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
    <span class="n">y_cancer</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_1dPlotter.plot" class="doc_header"><code>_1dPlotter.plot</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L475" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_1dPlotter.plot</code>(<strong><code>plot_data</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>line_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>scatter_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>ax</code></strong>:<code>Optional</code>[<code>Axes</code>]=<em><code>None</code></em>)</p>
</blockquote>
<p>Plot predictions from a regression or multiclass model with a
single input as a line</p>
<p>Parameters:</p>
<ul>
<li><code>plot_data</code>: Make a scatter plot of the data</li>
<li><code>line_kwargs</code>: kwargs to pass to <code>ax.plot</code> for plotting
predictions</li>
<li><code>scatter_kwargs</code>: kwargs to pass to <code>ax.scatter</code> for plotting data</li>
<li><code>ax</code>: Matplotlib <code>Axes</code> object. Plot will be added to this object
if provided; otherwise a new <code>Axes</code> object will be generated.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_iris</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="n">y_iris</span><span class="p">),</span>
    <span class="n">X_iris</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">y_iris</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_diabetes</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;bmi&quot;</span><span class="p">]],</span> <span class="n">y_diabetes</span><span class="p">),</span>
    <span class="n">X_diabetes</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;bmi&quot;</span><span class="p">]],</span>
    <span class="n">y_diabetes</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Models-with-Two-Features">Models with Two Features<a class="anchor-link" href="#Models-with-Two-Features"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>An <code>Inspector</code> for any model with two features also has a <code>plot</code> method.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_Clas2dPlotter.plot" class="doc_header"><code>_Clas2dPlotter.plot</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L725" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_Clas2dPlotter.plot</code>(<strong><code>plot_data</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>heatmap_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>scatter_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>tick_formatter</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>'.2f'</code></em>, <strong><code>ax</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Plot data and predictions</p>
<p>Parameters:</p>
<ul>
<li><code>plot_data</code>: Make a scatter plot of the data</li>
<li><code>heatmap_kwargs</code>: kwargs to pass to <code>sns.heatmap</code> for plotting
predictions</li>
<li><code>scatter_kwargs</code>: kwargs to pass to <code>ax.scatter</code> for plotting data</li>
<li><code>tick_formatter</code>: Tick label format specifier</li>
<li><code>ax</code>: Matplotlib <code>Axes</code> object. Plot will be added to this object
if provided; otherwise a new <code>Axes</code> object will be generated.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_cancer</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="n">y_cancer</span><span class="p">),</span>
    <span class="n">X_cancer</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">],</span>
    <span class="n">y_cancer</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_iris</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="n">y_iris</span><span class="p">),</span>
    <span class="n">X_iris</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">],</span>
    <span class="n">y_iris</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
        <span class="n">X_diabetes</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;bmi&quot;</span><span class="p">,</span> <span class="s2">&quot;bp&quot;</span><span class="p">]],</span> <span class="n">y_diabetes</span>
    <span class="p">),</span>
    <span class="n">X_diabetes</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;bmi&quot;</span><span class="p">,</span> <span class="s2">&quot;bp&quot;</span><span class="p">]],</span>
    <span class="n">y_diabetes</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It also has a <code>plot3d</code> method. The interface is slightly different for binary models than for multiclass or regression models.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_Bin2dPlotter.plot3d" class="doc_header"><code>_Bin2dPlotter.plot3d</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L807" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_Bin2dPlotter.plot3d</code>(<strong><code>thresh</code></strong>=<em><code>0.5</code></em>, <strong><code>plot_prob</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>plot_thresh</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>plot_data</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>prob_surf_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>thresh_surf_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>scatter_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>ax</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Plot data and predictions in 3D</p>
<p>Best viewed with a tool such as <a href="https://github.com/matplotlib/ipympl">https://github.com/matplotlib/ipympl</a>
that supports rotating the output</p>
<p>Parameters:</p>
<ul>
<li><code>thresh</code>: Probability threshold for counting a prediction as
positive</li>
<li><code>plot_prob</code>: Whether to plot the model probabilities</li>
<li><code>plot_thresh</code>: Whether to plot a classification threshold</li>
<li><code>plot_data</code>: Whether to plot the data</li>
<li><code>prob_surf_kwargs</code>: kwargs to pass to the model probability
surface</li>
<li><code>thresh_surf_kwargs</code>: kwargs to pass to the threshold surface</li>
<li><code>scatter_kwargs</code>: kwargs to pass to the scatter plot of the data</li>
<li><code>ax</code>: Matplotlib <code>Axes</code> object. Plot will be added to this object
if provided; otherwise a new <code>Axes</code> object will be generated.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_cancer</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="n">y_cancer</span><span class="p">),</span>
    <span class="n">X_cancer</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">],</span>
    <span class="n">y_cancer</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot3d</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>An interactive tool such as <a href="https://github.com/matplotlib/ipympl">ipyml</a> makes it easier to see depth in these 3D plots:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Video</span>

<span class="n">Video</span><span class="p">(</span>
    <span class="s2">&quot;https://github.com/gsganden/model_inspector/blob/master/docs/regression_3d.mov?raw=true&quot;</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="_Reg2dPlotter.plot3d" class="doc_header"><code>_Reg2dPlotter.plot3d</code><a href="https://github.com/gsganden/model_inspector/tree/master/model_inspector/inspect.py#L664" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>_Reg2dPlotter.plot3d</code>(<strong><code>plot_data</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>surf_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>scatter_kwargs</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>ax</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Plot data and predictions in 3d</p>
<p>Best viewed with a tool such as <a href="https://github.com/matplotlib/ipympl">https://github.com/matplotlib/ipympl</a>
that supports rotating the output</p>
<p>Parameters:</p>
<ul>
<li><code>plot_data</code>: Make a scatter plot of the data</li>
<li><code>surf_kwargs</code>: kwargs to pass to <code>ax.plot_surface</code> for plotting
predictions</li>
<li><code>scatter_kwargs</code>: kwargs to pass to <code>ax.scatter</code> for plotting data</li>
<li><code>ax</code>: Matplotlib <code>Axes</code> object. Plot will be added to this object
if provided; otherwise a new <code>Axes</code> object will be generated.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_iris</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="n">y_iris</span><span class="p">),</span>
    <span class="n">X_iris</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">],</span>
    <span class="n">y_iris</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot3d</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inspector</span> <span class="o">=</span> <span class="n">get_inspector</span><span class="p">(</span>
    <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
        <span class="n">X_diabetes</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;bmi&quot;</span><span class="p">,</span> <span class="s2">&quot;bp&quot;</span><span class="p">]],</span> <span class="n">y_diabetes</span>
    <span class="p">),</span>
    <span class="n">X_diabetes</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;bmi&quot;</span><span class="p">,</span> <span class="s2">&quot;bp&quot;</span><span class="p">]],</span>
    <span class="n">y_diabetes</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">plot3d</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

